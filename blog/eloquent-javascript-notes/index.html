<html><head><title>Eloquent JavasScript | Dave Woodall</title><meta charset="utf-8" /><link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" /><script src="../../scripts/lib/jquery.min-7e1c143b.js" type="text/javascript"></script><script src="../../scripts/lib/modernizer-b2be4ef8.js" type="text/javascript"></script><script src="../../scripts/nav_overlay-747321c6.js" type="text/javascript"></script><script src="../../scripts/script-e7c3a842.js" type="text/javascript"></script><meta content="initial-scale=1.0" name="viewport" /><meta content="Eloquent JavasScript" property="og:title" /><meta content="Dave Woodall" property="og:site_name" /><meta content="http://wwwoodall.com" property="og:url" /><meta content="http://wwwoodall.com/images/heros/fail.gif" property="og:image" /><meta content="summary" name="twitter:card" /><meta content="@wwwoodall" name="twitter:site" /><meta content="@wwwoodall" name="twitter:creator" /><meta content="" property="og:description" /></head><link href="../../stylesheets/application-cf65f318.css" media="screen" rel="stylesheet" type="text/css" /><link href="http://fonts.googleapis.com/css?family=Radley:400,400italic" rel="stylesheet" type="text/css" /><link href="http://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic,700italic" rel="stylesheet" type="text/css" /><body><div class="l-header"><nav class="left-nav"><div class="pic"><img src="../../images/dave_woodall-4a4784bb.jpg" /></div><p>Dave Woodall</p><div class="bio">Christian, Husband, Dad, Hacker, Designer, Inventor, Thinker, Reader, Writer, French press Snowboard then beers.</div><div class="location">Boulder, CO</div><p>Pages</p><ul><li><a class="" href="/">new</a></li><li><a class="" href="/gifs/">gifs</a></li><li><a class="" href="/pictures/">pictures</a></li><li><a class="" href="/jots/">jots</a></li><li><a class="" href="/blog/">blog</a></li><li><a class="" href="/shortcuts/">shortcuts</a></li><li><a class="" href="/notes/">notes</a></li><li><a class="" href="/reading/">reading</a></li><li><a class="" href="/links/">links</a></li></ul><div class="mailchimp"><!--Begin MailChimp Signup Form--><link href="//cdn-images.mailchimp.com/embedcode/classic-081711.css" rel="stylesheet" type="text/css"><style type="text/css">#mc_embed_signup background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;
/!* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */</style><div id="mc_embed_signup"><form action="//lettucebooks.us8.list-manage.com/subscribe/post?u=42150f382a237947f46c88221&amp;id=49f1ff76a7" class="validate" id="mc-embedded-subscribe-form" method="post" name="mc-embedded-subscribe-form" novalidate="" target="_blank"><div id="mc_embed_signup_scroll"><div class="mc-field-group"><label for="mce-EMAIL">Stay updated!</label><input class="required email" id="mce-EMAIL" name="EMAIL" type="email" value="email address" /></div><div class="clear" id="mce-responses"><div class="response" id="mce-error-response" style="display:none"></div><div class="response" id="mce-success-response" style="display:none"></div></div><!--real people should not fill this in and expect good things - do not remove this or risk form bot signups--><div style="position: absolute; left: -5000px;"><input name="b_42150f382a237947f46c88221_49f1ff76a7" tabindex="-1" type="text" value="" /></div><div class="clear"><input class="button" id="mc-embedded-subscribe" name="subscribe" type="submit" value="Subscribe" /></div></div></form></div><script src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js" type="text/javascript"></script><script type="text/javascript">| (function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj = jQuery.noConflict(true);  / End mc_embed_signup</script></link></div></nav></div><div class="l-container"><article class="type-system-traditional"><p class="type">notes</p><h1>Eloquent JavasScript</h1><img src="../../images/heros/fail-2db94504.gif" /><cite></cite><h2>My notes</h2><p class="date">Aug 30, 2014</p><h4 id="objectcreate">Object.create()</h4>

<p>Why use Object.create verse just normal {}?</p>

<blockquote>
  <p>You can use Object.create to create an object with a specific prototype.</p>
</blockquote>

<blockquote>
  <p>We saw the Object.create function, which allows us to create an object with a specific prototype. You are allowed to pass null as the prototype to create a fresh object with no prototype. For objects like map, where the properties could be anything, this is exactly what we want.</p>
</blockquote>

<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="nx">map</span><span class="p">[</span><span class="s2">"pizza"</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.069</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"toString"</span> <span class="k">in</span> <span class="nx">map</span><span class="p">);</span>
<span class="c1">// → false</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"pizza"</span> <span class="k">in</span> <span class="nx">map</span><span class="p">);</span>
<span class="c1">// → true</span>
</code></pre>

<blockquote>
  <p>Now we can safely use for/in loops, no matter what people have been doing to Object.prototype.</p>
</blockquote>

<h4 id="getprototypeof">getPrototypeOf()</h4>

<pre class="highlight javascript"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">({})</span> <span class="o">==</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
<span class="c1">// → true</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">));</span>
<span class="c1">// → null</span>
</code></pre>

<blockquote>
  <p>As you might expect, the Object.getPrototypeOf function returns the prototype of an object.</p>
</blockquote>

<blockquote>
  <p>The prototype relations of JavaScript objects form a tree-shaped structure, and at the root of this structure sits Object.prototype. It provides a few methods that show up in all objects, such as toString, which converts an object to a string representation.</p>
</blockquote>

<p>Starting to notice that JavaScript needs me to interact with the Object parent to obtain certain information.</p>

<h4 id="forin-vs-in-return-values">for/in vs. in return values.</h4>

<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="s1">'dave'</span><span class="p">,</span>
  <span class="na">age</span><span class="p">:</span> <span class="mi">37</span><span class="p">,</span>
  <span class="na">blam</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){}</span>
<span class="p">}</span>
</code></pre>

<h5 id="for--in">for / in</h5>
<p>returns a loop.</p>

<pre class="highlight javascript"><code><span class="k">for</span> <span class="p">(</span><span class="nx">p</span> <span class="k">in</span> <span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user</span><span class="p">[</span><span class="nx">p</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre>

<h5 id="in">in</h5>

<p>is a boolean. <em>NOTE</em> all properties are checked as a string.</p>

<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="s1">'blam'</span> <span class="k">in</span> <span class="nx">user</span><span class="p">;</span>  <span class="c1">// blam is a function</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
</code></pre>

<p><a href="http://eloquentjavascript.net/06_object.html#p_FtECKQ2UPV">quirks explained here</a></p>

<h4 id="enumerable-vs-nonenumerable">Enumerable vs. NonEnumerable</h4>

<p>JavaScript distinguishes between enumerable and nonenumerable properties.</p>

<blockquote>
  <p>All properties that we create by simply assigning to them are enumerable. The standard properties in <code>Object.prototype</code> are all nonenumerable, which is why they do not show up in such a for/in loop.</p>
</blockquote>

<blockquote>
  <p>It is possible to define our own nonenumerable properties by using the <code>Object.defineProperty</code> function, which allows us to control the type of property we are creating.</p>
</blockquote>

<pre class="highlight javascript"><code><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s2">"hiddenNonsense"</span><span class="p">,</span> <span class="p">{</span><span class="na">enumerable</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="s2">"hi"</span><span class="p">});</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">map</span><span class="p">)</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
<span class="c1">// → pizza</span>
<span class="c1">// → touched tree</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">map</span><span class="p">.</span><span class="nx">hiddenNonsense</span><span class="p">);</span>
<span class="c1">// → hi</span>
</code></pre>

<blockquote>
  <p>So now the property is there, but it won’t show up in a loop. That’s good. But we still have the problem with the regular in operator claiming that the Object.prototype properties exist in our object. For that, we can use the object’s hasOwnProperty method.</p>
</blockquote>

<h4 id="hasownproperty">hasOwnProperty()</h4>
<blockquote>
  <p>This method tells us whether the object itself has the property, without looking at its prototypes. This is often a more useful piece of information than what the in operator gives us.</p>
</blockquote>

<blockquote>
  <p>When you are worried that someone (some other code you loaded into your program) might have messed with the base object prototype, I recommend you write your for/in loops like this:</p>
</blockquote>

<pre class="highlight javascript"><code><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">map</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">map</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span> <span class="p">{</span>
<span class="c1">// ... this is an own property</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<h4 id="objectkeys">Object.keys()</h4>
<p>Returns an array of property names in an object.</p>

<h4 id="defineproperty">defineProperty()</h4>

<h4 id="get-and-set">get and set</h4>

<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">pile</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">elements</span><span class="p">:</span> <span class="p">[</span><span class="s2">"eggshell"</span><span class="p">,</span> <span class="s2">"orange peel"</span><span class="p">,</span> <span class="s2">"worm"</span><span class="p">],</span>
  <span class="nx">get</span> <span class="nx">height</span><span class="p">()</span> <span class="p">{</span>
<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">set</span> <span class="nx">height</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Ignoring attempt to set height to"</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">pile</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
<span class="c1">// → 3</span>
<span class="nx">pile</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="c1">// → Ignoring attempt to set height to 100</span>
</code></pre>

<blockquote>
  <p>In object literal, the <code>get</code> or <code>set</code> notation for properties allows you to specify a function to be run when the property is read or written. </p>
</blockquote>

<h4 id="instanceof">instanceof</h4>

<p>A binary operator useful to know whether an object was derived from a specific constructor. </p>

<pre class="highlight javascript"><code><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">;</span>
<span class="c1">// → true</span>
</code></pre>

<p>Almost every object is an instance of Object so be aware</p>

<p><a href="http://eloquentjavascript.net/06_object.html#p_4sWuvx6wkg">grasp this</a></p>

<h5 id="calling-methods-on-null-properties">Calling methods on null properties.</h5>

<blockquote>
  <p>But often, your nonsense computation will simply produce a NaN (not a number) or undefined value. And the program happily continues, convinced that it’s doing something meaningful. The mistake will manifest itself only later, after the bogus value has traveled though several functions. It might not trigger an error at all but silently cause the program’s output to be wrong. Finding the source of such problems can be difficult.</p>
</blockquote>

<h4 id="strict-mode">Strict mode</h4>

<blockquote>
  <p>JavaScript can be made a little more strict by enabling strict mode. This is done by putting the string "use strict" at the top of a file or a function body. Here’s an example:</p>
</blockquote>

<pre class="highlight javascript"><code><span class="kd">function</span> <span class="nx">canYouSpotTheProblem</span><span class="p">()</span> <span class="p">{</span>
  <span class="s2">"use strict"</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">counter</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">counter</span><span class="o">++</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Happy happy"</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">canYouSpotTheProblem</span><span class="p">();</span>
<span class="c1">// → ReferenceError: counter is not defined</span>
</code></pre>

<blockquote>
  <p>Normally, when you forget to put var in front of your variable, as with counter in the example, JavaScript quietly creates a global variable and uses that. 
In strict mode, however, an error is reported instead. This is very helpful. It should be noted, though, that this doesn’t work when the variable in question already exists as a global variable, but only when assigning to it would have created it.</p>
</blockquote>

<p>Another change in strict mode is that the this binding holds the value undefined in functions that are not called as methods. When making such a call outside of strict mode, this refers to the global scope object. So if you accidentally call a method or constructor incorrectly in strict mode, JavaScript will produce an error as soon as it tries to read something from this, rather than happily working with the global object, creating and reading global variables.</p>
</article></div></body><footer class="footer"><div class="footer-logo"></div><div class="footer-links"><ul><li><h3>Dave Woodall</h3></li><li><a href="/blog/about">about</a></li></ul><ul><li><h3>Pages</h3></li><li><a class="" href="/">new</a></li><li><a class="" href="/gifs/">gifs</a></li><li><a class="" href="/pictures/">pictures</a></li><li><a class="" href="/jots/">jots</a></li><li><a class="" href="/blog/">blog</a></li><li><a class="" href="/shortcuts/">shortcuts</a></li><li><a class="" href="/notes/">notes</a></li><li><a class="" href="/reading/">reading</a></li><li><a class="" href="/links/">links</a></li></ul><ul><li><h3>Social</h3></li><li><a target="_blank" href="http://www.github.com/woodall"><div class="fa fa-github"></div> <span>github</span></a></li><li><a target="_blank" href="http://www.dribbble.com/wwwoodall"><div class="fa fa-dribbble"></div> <span>dribbble</span></a></li><li><a target="_blank" href="http://www.twitter.com/wwwoodall"><div class="fa fa-twitter"></div> <span>twitter</span></a></li></ul></div><hr /><p>Designed & Built by Dave using <a target="_blank" href="http://www.middlemanapp.com">middleman</a> & thoughtbot <a target="_blank" href="http://thoughtbot.com/open-source">front-end</a>. </p></footer><script src="../scripts/nav_overlay-747321c6.js"></script><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-52536027-1', 'auto');
ga('send', 'pageview');</script></html>